<div class="background">
  <div class="shape"></div>
  <div class="shape"></div>
</div>
<form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
    <div class="txt-primary h3 text-center text-dark">SignUp Here</div>

    <!-- username -->
    <!-- <label class=" text-dark" for="username">Username</label> -->
    <input class="my-4 text-dark" type="text" placeholder="Username"  id="username" formControlName="username" required  (blur)="checkDoc($event, 'username')"
    [ngClass]="{
      'border': (form.controls['username'].invalid && (form.controls['username'].dirty || form.controls['username'].touched )|| isUsernameUsed),
      'border-danger': form.controls['username'].invalid && (form.controls['username'].dirty || form.controls['username'].touched),
    }" >

    <div *ngIf="isUsernameUsed && form.controls['username'].value.length > 0" class="error">
      <div class="text-danger">Username already Used!</div>
    </div>
    <div *ngIf="form.controls['username'].invalid && (form.controls['username'].dirty || form.controls['username'].touched)" class="error">
      <div *ngIf="form.controls['username'].errors?.['required']" class="text-danger">Username is required</div>
      <div *ngIf="form.controls['username'].errors?.['username']" class="text-danger">Invalid Username format</div>
    </div>

    <!-- email -->
    <!-- <label class="text-dark" for="email">Email</label> -->
    <input class="my-4 text-dark" type="text" placeholder="Email"  id="username" formControlName="email" required (blur)="checkDoc($event, 'email')"
    [ngClass]="{
      'border': (form.controls['email'].invalid && (form.controls['email'].dirty || form.controls['email'].touched) || isEmailUsed),
      'border-danger': form.controls['email'].invalid && (form.controls['email'].dirty || form.controls['email'].touched)
    }">
    <div *ngIf="isEmailUsed && form.controls['email'].value.length > 0" class="error">
      <div class="text-danger">Email already Used!</div>
    </div>
    <div *ngIf="form.controls['email'].invalid && (form.controls['email'].dirty || form.controls['email'].touched)" class="error">
      <div *ngIf="form.controls['email'].errors?.['required']" class="text-danger">Email is required</div>
      <div *ngIf="form.controls['email'].errors?.['email']" class="text-danger">Invalid email format</div>
    </div>
    
    <!-- password -->
    <!-- <label class="text-dark" for="password">Password</label> -->
    <input class="my-4 text-dark" type="password" placeholder="Password" id="password"  formControlName="password" required
    [ngClass]="{
      'border': form.controls['password'].invalid && (form.controls['password'].dirty || form.controls['password'].touched),
      'border-danger-subtle': form.controls['password'].invalid && (form.controls['password'].dirty || form.controls['password'].touched)
    }"
    >
    <div *ngIf="form.controls['password'].invalid && (form.controls['password'].dirty || form.controls['password'].touched)" class="error">
      <div *ngIf="form.controls['password'].errors?.['required']" class="text-danger">Password is required</div>
      
      <div *ngIf="passwordFormField?.errors?.['pattern']" class="text-danger">Password should have: </div>
      <span class="text-danger" [ngClass]="{'text-primary':  passwordFormField?.value.match('^(?=.*[A-Z])')}">At least one uppercase letter.</span>
      
      <span class="text-danger" [ngClass]="{'text-primary':  passwordFormField?.value.match('(?=.*[a-z])')}">At least one lowercase letter.</span>
      
      <span class="text-danger" [ngClass]="{'text-primary':  passwordFormField?.value.match('(.*[0-9].*)')}">At least one digit.</span>
      
      <span class="text-danger" [ngClass]="{'text-primary':  passwordFormField?.value.match('(?=.*[!@#$%^&*])')}">At least one special character.</span>
      
      <span class="text-danger" [ngClass]="{'text-primary':  passwordFormField?.value.match('.{8,}')}">At least 8 characters long.</span>  
    
    </div>

    <!-- confirm password -->
    <!-- <label class="text-dark" for="confirm-password">Confirm Password</label> -->
    <input class="mt-4 text-dark" type="password" placeholder="Confirm Password" id="confirm-password"  formControlName="confirmPassword" required
    [ngClass]="{
      'border': form.controls['confirmPassword'].invalid && (form.controls['confirmPassword'].dirty || form.controls['confirmPassword'].touched),
      'border-danger-subtle': form.controls['confirmPassword'].invalid && (form.controls['confirmPassword'].dirty || form.controls['confirmPassword'].touched)
    }"
    >
    <div *ngIf="form.controls['confirmPassword'].invalid && (form.controls['confirmPassword'].dirty || form.controls['confirmPassword'].touched) || !isPasswordsMatched " class="error">
      <div *ngIf="form.controls['confirmPassword'].errors?.['required']" class="text-danger">Password is required</div>
      <div *ngIf="!isPasswordsMatched" class="text-danger">Password Mismatched</div>
    </div>

    <button type="submit"  [disabled]="form.invalid">Sign Up</button>
    <div class="mt-3 text-dark fs-6 fw-light text-center"> 
      Already Have an Account?
      <a class="text-dark text-decoration-underline fw-normal" aria-current="page" routerLink="/login">Log In</a>
       
    </div>
    <!-- <div class="social">
      <div class="go"><i class="fab fa-google"></i>  Google</div>
      <div class="fb"><i class="fab fa-facebook"></i>  Facebook</div>
    </div> -->
</form>